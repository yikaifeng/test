//**********************************************************
//**********************************************************
"use strict";

//**********************************************************

//======================================================
//–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã
//======================================================

//–ò–∫–æ–Ω–∫–∏
const ICO_CARD = "üí≥";
const ICO_SOON = "‚è±Ô∏è";
const ICO_PROBLEM = "‚ÅâÔ∏è";
	
//–ò–º–µ–Ω–∞ –ø–æ–ª–µ–π –∏ –∑–Ω–∞—á–µ–Ω–∏—è
const ACCOUNT_TYPE = "–¢–∏–ø —Å—á—ë—Ç–∞";
	//const _PERIOD = ICO_PERIOD + " –ø–æ–≤—Ç–æ—Ä.";
const BALANCE = "–ë–ê–õ–ê–ù–°";
const ACCOUNT_END = "–°—Ä–æ–∫ —Å—á—ë—Ç–∞";
const ACCOUNT_NAME = "–ù–∞–∑–≤–∞–Ω–∏–µ";
const CARD_EXISTS = "–ù–∞–ª–∏—á–∏–µ –∫–∞—Ä—Ç—ã";
const CARD_END = "–°—Ä–æ–∫ –∫–∞—Ä—Ç—ã";
	
//======================================================
//–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
//======================================================
	
//–°–æ–æ–±—â–µ–Ω–∏—è
//var msgCorrected = ICO_WARNING + " –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:";
//var msgPeriodOff = ICO_WARNING + " –ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å –Ω–µ –≤–∫–ª—é—á–µ–Ω–∞";
	
//======================================================
//–ú–µ—Ç–æ–¥—ã
//======================================================
	
//------------------------------------------------------
//–§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–∫–æ–Ω–∫–∏
//------------------------------------------------------
function getIcon(strSource) {
		
	//–ø—Ä–æ–≤–µ—Ä–∫–∞, –Ω–µ –ø—É—Å—Ç–∞—è –ª–∏ —Å—Ç—Ä–æ–∫–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
	if (strSource == undefined) {
		return "";
	} else {
		var separator = " ";
		strSource = String(strSource);
		return strSource.split(separator,1)[0];
	}
}
	
//------------------------------------------------------
//–§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏—è –±–µ–∑ –∏–∫–æ–Ω–∫–∏
//------------------------------------------------------
function getName(strSource) {
	
	//–ø—Ä–æ–≤–µ—Ä–∫–∞, –Ω–µ –ø—É—Å—Ç–∞—è –ª–∏ —Å—Ç—Ä–æ–∫–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
	if (strSource == undefined) {
		return "";
	} else {
		var separator = " ";
		strSource = String(strSource);
		var strIcon = strSource.split(separator,1)[0];
		var strName = strSource.slice(strIcon.length);
		return strName = strName.trim();
	}
}

//------------------------------------------------------
//–§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –æ—Å—Ç–∞—Ç–∫–∞ –¥–Ω–µ–π
//------------------------------------------------------
function daysLeft(incomeDate) {
	
	//–ü—Ä–æ—á–µ–µ
	var dteToday = new Date();
	
	//–†–∞–∑–Ω–∏—Ü–∞ –≤ –¥–Ω—è—Ö —Å —Å–µ–π—á–∞—Å
	var dteDiff = (incomeDate - dteToday)/(1000*3600*24);
		
	//–û–∫—Ä—É–≥–ª—è–µ–º –¥–æ —Ü–µ–ª—ã—Ö
	dteDiff = dteDiff.toFixed(0);
	if (dteDiff == 0) {dteDiff = Math.abs(dteDiff);}
	
	return dteDiff;
		
}
	
//------------------------------------------------------
//–§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–≤–æ–¥–∞ –Ω–∞–∑–≤–∞–Ω–∏—è
//------------------------------------------------------
function getAccountName() {
	
	//—Ç–µ–∫—É—â–∏–π —Å—á—ë—Ç
	var account = entry();
	var res = "";
	
	//–∫–æ—Ä–æ—Ç–∫–∏–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –ø–æ–ª—è
	var FType = account.field(ACCOUNT_TYPE);
	var FName = account.field(ACCOUNT_NAME);
	var FCardExists = account.field(CARD_EXISTS);
	
	if (FCardExists) {
		res += " | " + ICO_CARD;
	}
	
	return getIcon(FType) + " " + FName + res;
}

//------------------------------------------------------
//–§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–≤–æ–¥–∞ –æ—Å—Ç–∞—Ç–∫–∞ –¥–Ω–µ–π –ø–æ —Å—Ä–æ–∫—É —Å—á–µ—Ç–∞
//------------------------------------------------------
function getAccountDaysLeft() {
	
	//—Ç–µ–∫—É—â–∏–π —Å—á—ë—Ç
	var res = " –¥–Ω.";
	
	//–∫–æ—Ä–æ—Ç–∫–∏–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –ø–æ–ª—è
	var FAccountEnd = field(ACCOUNT_END);
	
	//–µ—Å–ª–∏ –¥–∞—Ç–∞ –ø—É—Å—Ç–∞—è
	if (FAccountEnd == undefined) {
		return "";
		exit();
	}
	
	var days = daysLeft(FAccountEnd);
	
	if (days <= 30) {
		res = ICO_SOON + days + res;
	} else {
		res = days + res;
	}
	
	return res;
	
}

//------------------------------------------------------
//–§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–≤–æ–¥–∞ –æ—Å—Ç–∞—Ç–∫–∞ –¥–Ω–µ–π –ø–æ —Å—Ä–æ–∫—É –∫–∞—Ä—Ç—ã
//------------------------------------------------------
function getCardDaysLeft() {
	
	return "123";
}

//------------------------------------------------------
//–§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–≤–æ–¥–∞ —Å–∫–æ—Ä–æ –ª–∏ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è —Å—Ä–æ–∫
//------------------------------------------------------
function getStatus() {
	
	return "123";

}
